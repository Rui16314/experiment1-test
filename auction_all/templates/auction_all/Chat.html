
{% extends 'auction_all/Base.html' %}
{% block content %}
<h3>Chat with your opponent</h3>
<p>Your valuation this round: <strong>{{ my_valuation }}</strong></p>
<div id="chat" class="chatbox"></div>
<div class="input-group mt-2">
  <input id="msg" class="form-control" placeholder="Type a message..."/>
  <button class="btn btn-secondary" onclick="send()">Send</button>
</div>
<form method="post" class="mt-3"><button class="btn btn-primary">Go to bidding</button></form>
<script>
const box=document.getElementById('chat');
function render(e){const p=document.createElement('div');p.textContent=(e.p=={{ player.id_in_group }}?'You: ':'Opponent: ')+e.text;box.appendChild(p);box.scrollTop=box.scrollHeight;}
function send(){const t=document.getElementById('msg');if(!t.value.trim())return;liveSend({text:t.value});t.value='';}
function liveRecv(data){if(data.msg)render(data.msg);}
</script>
{% endblock %}
